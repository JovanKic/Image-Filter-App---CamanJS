var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),img=new Image,fileName="",downloadBtn=document.getElementById("download-btn"),uploadFile=document.getElementById("upload-file"),revertBtn=document.getElementById("revert-btn");function download(a,n){var t,e=document.createElement("a");e.download=n,e.href=a.toDataURL("image/jpeg",.8),t=new MouseEvent("click"),e.dispatchEvent(t)}document.addEventListener("click",function(a){a.target.classList.contains("filter-btn")&&(a.target.classList.contains("brightness-add")?Caman("#canvas",img,function(){this.brightness(5).render()}):a.target.classList.contains("brightness-remove")?Caman("#canvas",img,function(){this.brightness(-5).render()}):a.target.classList.contains("contrast-add")?Caman("#canvas",img,function(){this.contrast(5).render()}):a.target.classList.contains("contrast-remove")?Caman("#canvas",img,function(){this.contrast(-5).render()}):a.target.classList.contains("saturation-add")?Caman("#canvas",img,function(){this.saturation(10).render()}):a.target.classList.contains("saturation-remove")?Caman("#canvas",img,function(){this.saturation(-10).render()}):a.target.classList.contains("vibrance-add")?Caman("#canvas",img,function(){this.vibrance(10).render()}):a.target.classList.contains("vibrance-remove")?Caman("#canvas",img,function(){this.vibrance(-10).render()}):a.target.classList.contains("vintage-add")?Caman("#canvas",img,function(){this.vintage().render()}):a.target.classList.contains("lomo-add")?Caman("#canvas",img,function(){this.lomo().render()}):a.target.classList.contains("clarity-add")?Caman("#canvas",img,function(){this.clarity().render()}):a.target.classList.contains("sincity-add")?Caman("#canvas",img,function(){this.sinCity().render()}):a.target.classList.contains("crossprocess-add")?Caman("#canvas",img,function(){this.crossProcess().render()}):a.target.classList.contains("pinhole-add")?Caman("#canvas",img,function(){this.pinhole().render()}):a.target.classList.contains("nostalgia-add")?Caman("#canvas",img,function(){this.nostalgia().render()}):a.target.classList.contains("hermajesty-add")&&Caman("#canvas",img,function(){this.herMajesty().render()}))}),revertBtn.addEventListener("click",function(a){Caman("#canvas",img,function(){this.revert()})}),uploadFile.addEventListener("change",function(a){var n=document.getElementById("upload-file").files[0],t=new FileReader;n&&(fileName=n.name,t.readAsDataURL(n)),t.addEventListener("load",function(){(img=new Image).src=t.result,img.onload=function(){canvas.width=img.width,canvas.height=img.height,ctx.drawImage(img,0,0,img.width,img.height),canvas.removeAttribute("data-caman-id")}},!1)}),downloadBtn.addEventListener("click",function(a){var n,t=fileName.slice(-4);".jpg"!==t&&".png"!==t||(n=fileName.substring(0,fileName.length-4)+"edited.jpg"),download(canvas,n)});